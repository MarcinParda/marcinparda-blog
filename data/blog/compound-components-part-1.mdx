---
title: 'Compound Components - part 1'
date: '2023-03-19'
tags: ['compound-components', 'react', 'patterns']
draft: false
summary: 'How to avoid passing dozens of props to components using compound components in React'
authors: ['default']
---

# Problem

Imagine that you have to implement a simple panel in your application that displays information to the user about a successful action. All you have to do is pass a few props to the component responsible for displaying this panel. Everything suggests that you can do it in 5 minutes.

You start working on it, but when you begin to implement this component, you realize that you need to pass a few props related to how the panel header looks.

Then you notice that you need to pass several props related to how the content looks in this panel.

Later on, you notice that you need to pass props responsible for how the collapsing and closing buttons of the panel look and whether to show them at all.

And so on.

As a result, our "little" monster looks like this:

```tsx
<Panel
  headerTitle="Panel title"
  headerIcon="icon"
  headerIconColor="red"
  headerTextColor="white"
  headerButtonCloseColor="white"
  headerButtonCloseVisible={true}
  headerButtonCloseOnClick={() => {}}
  headerButtonCollapseColor="white"
  headerButtonCollapseVisible={true}
  headerButtonCollapseOnClick={() => {}}
  contentBackgroundColor="white"
  contentTextColor="black"
  contentText="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec auctor, nisl eget ultricies ultricies, nunc
  tortor aliquam nisl, eget ultricies lorem ipsum vitae nunc. Donec auctor, nisl eget ultricies ultricies, nunc tortor aliquam
  nisl, eget ultricies lorem ipsum vitae nunc."
  contentButtonColor="blue"
  ...
/>
```

Once you have implemented your component, it's time to move on to the next component to be implemented, which will be a panel displaying an action error to the user. At this point, you have two options:

1. Implement a new component in the same way as the previous one, but with a slightly different appearance.
2. Add props to the `Panel` component that will be responsible for displaying the error. As a result, the number of props may even double :(

...or you can learn about **Compound Components** and implement your component in such a way that you don't have to pass dozens of props to it.

# Solution

So, what are **Compound Components**?

**Compound Components** is a technique in React that allows you to create more complex components by composing smaller, logical sub-components.
It sounds a bit enigmatic, doesn't it? :) But don't worry, everything will be clear soon.

You must be familiar with the html `<table>` tag. Inside this tag, you can place `<tr>` and `<td>` tags, which are responsible for displaying rows and columns in a table.
All these tags are related to each other, and their common parent is the `<table>` tag. In this way, you can create more complex components by composing smaller, logical sub-components.

In a similar way, you can create more complex components in React by composing smaller, logical sub-components.
If you have used the [Material UI](https://material-ui.com/), library, you must be familiar with components such as `Button`, `TextField` or `Select`.

Their usage might look like this:

```tsx
<Select
  labelId="demo-simple-select-label"
  id="demo-simple-select"
  value={age}
  label="Age"
  onChange={handleChange}
>
  <MenuItem value={10}>Ten</MenuItem>
  <MenuItem value={20}>Twenty</MenuItem>
  <MenuItem value={30}>Thirty</MenuItem>
</Select>
```

As you can see in the above example, `Select` takes its children in the form of several `MenuItem`s, instead of passing these elements in props.
Thanks to this, these elements can be modified independently of the `Select` component. But how can we implement our `Panel` in such a way?

# Implementation

1. Let's first define the interface for our (slightly simplified) compound component `Panel`:

```tsx
interface PanelProps {
  title: string
}

interface ParentProps {
  children: React.ReactNode
}
```

2. Next, let's define the `Panel` component:

```tsx
export const Panel = ({ title, children }: PanelProps & ParentProps) => {
  return (
    <div>
      <h1>{title}</h1>
      {children}
    </div>
  )
}
```

3. Now let's define the `Header` and `Body` components:

```tsx
Panel.Header = function PanelHeader({ children }: ParentProps) {
  return (
    <header>
      <h2>{children}</h2>
    </header>
  )
}

Panel.Body = function PanelHeader({ children }: ParentProps) {
  return <section>{children}</section>
}
```

With the notation `Panel.Header = ...` we can assign a new property `Header` to `Panel`, which will contain the `Header` component.
Additionally, the `Header` and `Body` components do not take any props, only rendering their children. This allows us to use them as follows:

```tsx
<Panel title="Panel">
  <Panel.Header>
    <h3>Header</h3>
  </Panel.Header>
  <Panel.Body>
    <p>Body</p>
  </Panel.Body>
</Panel>
```

4. The whole thing will look like this:

```tsx
import React from 'react'

interface PanelProps {
  title: string
}

interface ParentProps {
  children: React.ReactNode
}

export const Panel = ({ title, children }: PanelProps & ParentProps) => {
  return (
    <div>
      <h1>{title}</h1>
      {children}
    </div>
  )
}

Panel.Header = function PanelHeader({ children }: ParentProps) {
  return <header>{children}</header>
}

Panel.Body = function PanelHeader({ children }: ParentProps) {
  return <main>{children}</main>
}
```

5. In further steps, we can add props that modify the appearance and behavior of the `Header` and `Body` components, as well as add other subcomponents if necessary.
   As you can see, with **Compound Components** we can relieve the `Panel` component of the responsibility for rendering `Header` and `Body` and passing props to them.
   Additionally, if necessary, we can easily swap `Header` and `Body`, which would be very difficult without **Compound Components**.

However, what if we want the `Header` and `Body` components to be able to communicate with each other? For example, pressing a button in `Header` should hide the entire `Panel` component?
In such a case, we can use the `Context API`. In the next article in this series, I will describe how to do it.

# Summary

That's all. I hope you enjoyed this article. If you have any questions, feel free to ask them in the comments.

**Here's an addon for you.** Brief summary of an article. You can use it to create fiches cards (e.g. in Anki).

## What are Compound Components?

**Compound Components** are a technique in React that allows developers to create complex components by composing smaller,
logical subcomponents together. These subcomponents are tightly coupled together, and are used together as part of a larger
parent component. By using Compound Components, developers can provide a more intuitive and user-friendly API for their components,
allowing users to easily customize and modify them without having to deal with dozens of props.

Example:

```html
<Dropdown>
  <Dropdown.Button>Menu</Dropdown.Button>
  <Dropdown.List>
    <Dropdown.Item>Option 1</Dropdown.Item>
    <Dropdown.Item>Option 2</Dropdown.Item>
    <Dropdown.Item>Option 3</Dropdown.Item>
  </Dropdown.List>
</Dropdown>
```
